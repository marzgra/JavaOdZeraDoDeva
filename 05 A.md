# V. Inne waÅ¼ne tematy

*Witaj w piÄ…tej czÄ™Å›ci przewodnika! Tutaj poznasz narzÄ™dzia i techniki, ktÃ³re sprawiÄ…, Å¼e TwÃ³j kod bÄ™dzie nie tylko dziaÅ‚aÅ‚, ale bÄ™dzie profesjonalny, bezpieczny i Å‚atwy w utrzymaniu. To jak przejÅ›cie od majsterkowania do profesjonalnego rzemiosÅ‚a.*

---

# A. Podstawy i narzÄ™dzia wspierajÄ…ce rozwÃ³j

## 28. Exception Handling â€” sztuka nie tylko Å‚apania bÅ‚Ä™dÃ³w, ale i projektowania wyjÄ…tkÃ³w

*CzeÅ›Ä‡! DziÅ› porozmawiamy o wyjÄ…tkach - nie o tych Å¼yciowych, ale o tych w kodzie. Exception handling to nie tylko try-catch - to caÅ‚a filozofia projektowania odpornych aplikacji!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy obsÅ‚ugi wyjÄ…tkÃ³w

```java
public class ExceptionBasics {
    public static void demonstrateBasicExceptions() {
        // Try-catch podstawy
        try {
            int result = 10 / 0; // ArithmeticException
        } catch (ArithmeticException e) {
            System.out.println("Nie moÅ¼na dzieliÄ‡ przez zero: " + e.getMessage());
        }
        
        // Multiple catch blocks
        try {
            String text = null;
            int length = text.length(); // NullPointerException
        } catch (NullPointerException e) {
            System.out.println("Null pointer: " + e.getMessage());
        } catch (Exception e) {
            System.out.println("Inny bÅ‚Ä…d: " + e.getMessage());
        }
        
        // Try-catch-finally
        try {
            // Kod, ktÃ³ry moÅ¼e rzuciÄ‡ wyjÄ…tek
            processData();
        } catch (Exception e) {
            System.out.println("BÅ‚Ä…d: " + e.getMessage());
        } finally {
            // Zawsze siÄ™ wykonuje
            System.out.println("SprzÄ…tanie zasobÃ³w");
        }
    }
    
    private static void processData() throws Exception {
        throw new Exception("PrzykÅ‚adowy bÅ‚Ä…d");
    }
    
    // Try-with-resources (Java 7+)
    public static void demonstrateTryWithResources() {
        try (FileReader reader = new FileReader("test.txt");
             BufferedReader buffered = new BufferedReader(reader)) {
            
            String line = buffered.readLine();
            System.out.println("Pierwsza linia: " + line);
            
        } catch (IOException e) {
            System.out.println("BÅ‚Ä…d odczytu pliku: " + e.getMessage());
        }
        // Zasoby automatycznie zamkniÄ™te
    }
}
```

#### Checked vs Unchecked Exceptions

```java
public class ExceptionTypes {
    // Checked exception - musi byÄ‡ obsÅ‚uÅ¼ony
    public void readFile(String filename) throws IOException {
        FileReader reader = new FileReader(filename);
        // Kompilator wymusza obsÅ‚ugÄ™ IOException
    }
    
    // Unchecked exception - moÅ¼e byÄ‡ obsÅ‚uÅ¼ony
    public void processArray(int[] array, int index) {
        int value = array[index]; // MoÅ¼e rzuciÄ‡ ArrayIndexOutOfBoundsException
    }
    
    // WÅ‚asny checked exception
    public static class ValidationException extends Exception {
        public ValidationException(String message) {
            super(message);
        }
    }
    
    // WÅ‚asny unchecked exception
    public static class BusinessLogicException extends RuntimeException {
        public BusinessLogicException(String message) {
            super(message);
        }
    }
    
    public void validateUser(String email) throws ValidationException {
        if (email == null || !email.contains("@")) {
            throw new ValidationException("NieprawidÅ‚owy email: " + email);
        }
    }
    
    public void processOrder(Order order) {
        if (order.getAmount() < 0) {
            throw new BusinessLogicException("Kwota nie moÅ¼e byÄ‡ ujemna");
        }
    }
    
    private static class Order {
        private double amount;
        public double getAmount() { return amount; }
    }
}
```

#### ðŸ’¡ WskazÃ³wki dla Juniorek
- UÅ¼ywaj try-with-resources dla zasobÃ³w
- Nie Å‚ap Exception bez powodu
- TwÃ³rz wÅ‚asne wyjÄ…tki dla logiki biznesowej
- Finally zawsze siÄ™ wykonuje

---

### ðŸš€ CzÄ™Å›Ä‡ dla Seniorek

#### Zaawansowane wzorce exception handling

```java
public class AdvancedExceptionHandling {
    
    // Result pattern - alternatywa dla exceptions
    public static class Result<T> {
        private final T value;
        private final Exception error;
        
        private Result(T value, Exception error) {
            this.value = value;
            this.error = error;
        }
        
        public static <T> Result<T> success(T value) {
            return new Result<>(value, null);
        }
        
        public static <T> Result<T> failure(Exception error) {
            return new Result<>(null, error);
        }
        
        public boolean isSuccess() { return error == null; }
        public T getValue() { return value; }
        public Exception getError() { return error; }
        
        public <R> Result<R> map(Function<T, R> mapper) {
            if (isSuccess()) {
                try {
                    return Result.success(mapper.apply(value));
                } catch (Exception e) {
                    return Result.failure(e);
                }
            }
            return Result.failure(error);
        }
    }
    
    // Exception chaining i context
    public static class ServiceException extends Exception {
        private final String context;
        
        public ServiceException(String message, String context, Throwable cause) {
            super(message, cause);
            this.context = context;
        }
        
        public String getContext() { return context; }
        
        @Override
        public String toString() {
            return super.toString() + " [Context: " + context + "]";
        }
    }
    
    // Retry pattern z exponential backoff
    public static class RetryableOperation {
        private static final int MAX_RETRIES = 3;
        private static final long BASE_DELAY = 1000; // 1 second
        
        public static <T> T executeWithRetry(Supplier<T> operation) throws Exception {
            Exception lastException = null;
            
            for (int attempt = 0; attempt < MAX_RETRIES; attempt++) {
                try {
                    return operation.get();
                } catch (Exception e) {
                    lastException = e;
                    
                    if (attempt < MAX_RETRIES - 1) {
                        long delay = BASE_DELAY * (1L << attempt); // Exponential backoff
                        System.out.printf("Attempt %d failed, retrying in %d ms%n", 
                            attempt + 1, delay);
                        
                        try {
                            Thread.sleep(delay);
                        } catch (InterruptedException ie) {
                            Thread.currentThread().interrupt();
                            throw new Exception("Retry interrupted", ie);
                        }
                    }
                }
            }
            
            throw new Exception("Operation failed after " + MAX_RETRIES + " attempts", lastException);
        }
    }
}
```

---

## 29. Serialization â€” jak zapakowaÄ‡ i rozpakowaÄ‡ obiekty

*Serialization to jak pakowanie prezentÃ³w - musisz wiedzieÄ‡, jak bezpiecznie zapakowaÄ‡ obiekt, Å¼eby po rozpakowaniu wyglÄ…daÅ‚ tak samo!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy serializacji

```java
public class SerializationBasics {
    // Klasa do serializacji
    public static class Person implements Serializable {
        private static final long serialVersionUID = 1L;
        
        private String name;
        private int age;
        private transient String password; // Nie bÄ™dzie serializowane
        
        public Person(String name, int age, String password) {
            this.name = name;
            this.age = age;
            this.password = password;
        }
        
        @Override
        public String toString() {
            return String.format("Person{name='%s', age=%d, password='%s'}", 
                name, age, password);
        }
    }
    
    public static void demonstrateSerialization() {
        Person person = new Person("Anna", 25, "secret123");
        
        // Serializacja do pliku
        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream("person.ser"))) {
            oos.writeObject(person);
            System.out.println("Obiekt zapisany: " + person);
        } catch (IOException e) {
            System.err.println("BÅ‚Ä…d zapisu: " + e.getMessage());
        }
        
        // Deserializacja z pliku
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream("person.ser"))) {
            Person loaded = (Person) ois.readObject();
            System.out.println("Obiekt wczytany: " + loaded);
        } catch (IOException | ClassNotFoundException e) {
            System.err.println("BÅ‚Ä…d odczytu: " + e.getMessage());
        }
    }
}
```

---

### ðŸš€ CzÄ™Å›Ä‡ dla Seniorek

#### JSON serialization z Jackson

```java
public class JsonSerialization {
    private static final ObjectMapper mapper = new ObjectMapper();
    
    public static class User {
        @JsonProperty("user_name")
        private String name;
        
        @JsonIgnore
        private String password;
        
        @JsonFormat(pattern = "yyyy-MM-dd")
        private LocalDate birthDate;
        
        // Constructors, getters, setters...
    }
    
    public static void demonstrateJsonSerialization() {
        User user = new User("Anna", "secret", LocalDate.of(1995, 5, 15));
        
        try {
            // Object to JSON
            String json = mapper.writeValueAsString(user);
            System.out.println("JSON: " + json);
            
            // JSON to Object
            User loaded = mapper.readValue(json, User.class);
            System.out.println("Loaded: " + loaded);
            
        } catch (JsonProcessingException e) {
            System.err.println("JSON error: " + e.getMessage());
        }
    }
}
```

---

## 30. Adnotacje â€” znaczki z mocÄ…

*Adnotacje to jak naklejki na kodzie - wyglÄ…dajÄ… niewinnie, ale mogÄ… zmieniaÄ‡ zachowanie caÅ‚ej aplikacji!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawowe adnotacje

```java
public class AnnotationBasics {
    @Override
    public String toString() {
        return "AnnotationBasics";
    }
    
    @Deprecated
    public void oldMethod() {
        System.out.println("Ta metoda jest przestarzaÅ‚a");
    }
    
    @SuppressWarnings("unchecked")
    public void methodWithWarnings() {
        List rawList = new ArrayList(); // Raw type warning suppressed
    }
}
```

---

### ðŸš€ CzÄ™Å›Ä‡ dla Seniorek

#### WÅ‚asne adnotacje

```java
public class CustomAnnotations {
    @Retention(RetentionPolicy.RUNTIME)
    @Target(ElementType.METHOD)
    public @interface Timed {
        String value() default "";
    }
    
    @Retention(RetentionPolicy.RUNTIME)
    @Target(ElementType.FIELD)
    public @interface Inject {
        String name() default "";
    }
    
    // Processor adnotacji
    public static class AnnotationProcessor {
        public static void processTimedMethods(Object obj) {
            Class<?> clazz = obj.getClass();
            
            for (Method method : clazz.getDeclaredMethods()) {
                if (method.isAnnotationPresent(Timed.class)) {
                    Timed timed = method.getAnnotation(Timed.class);
                    System.out.println("Found @Timed method: " + method.getName() + 
                        " with value: " + timed.value());
                }
            }
        }
    }
    
    // UÅ¼ycie wÅ‚asnych adnotacji
    public static class Service {
        @Timed("database-operation")
        public void saveData() {
            System.out.println("Saving data...");
        }
        
        @Inject(name = "userRepository")
        private Object repository;
    }
}
```

---

## 31. Java IO: pliki, strumienie i czytanie z klawiatury + HttpClient

*IO to jak system nerwowy aplikacji - Å‚Ä…czy jÄ… ze Å›wiatem zewnÄ™trznym!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy IO

```java
public class IOBasics {
    public static void demonstrateFileIO() {
        // Zapis do pliku
        try (PrintWriter writer = new PrintWriter("output.txt")) {
            writer.println("Hello, World!");
            writer.println("Java IO is fun!");
        } catch (IOException e) {
            System.err.println("BÅ‚Ä…d zapisu: " + e.getMessage());
        }
        
        // Odczyt z pliku
        try (BufferedReader reader = new BufferedReader(new FileReader("output.txt"))) {
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println("Odczytano: " + line);
            }
        } catch (IOException e) {
            System.err.println("BÅ‚Ä…d odczytu: " + e.getMessage());
        }
    }
    
    // NIO.2 (Java 7+) - prostsze API
    public static void demonstrateNIO() {
        Path path = Paths.get("nio-example.txt");
        
        try {
            // Zapis
            Files.write(path, Arrays.asList("Line 1", "Line 2", "Line 3"));
            
            // Odczyt
            List<String> lines = Files.readAllLines(path);
            lines.forEach(System.out::println);
            
            // Informacje o pliku
            System.out.println("Size: " + Files.size(path) + " bytes");
            System.out.println("Last modified: " + Files.getLastModifiedTime(path));
            
        } catch (IOException e) {
            System.err.println("NIO error: " + e.getMessage());
        }
    }
}
```

---

### ðŸš€ CzÄ™Å›Ä‡ dla Seniorek

#### HttpClient (Java 11+)

```java
public class HttpClientDemo {
    private static final HttpClient client = HttpClient.newBuilder()
        .connectTimeout(Duration.ofSeconds(10))
        .build();
    
    public static void demonstrateHttpClient() {
        // GET request
        HttpRequest getRequest = HttpRequest.newBuilder()
            .uri(URI.create("https://jsonplaceholder.typicode.com/posts/1"))
            .timeout(Duration.ofSeconds(30))
            .build();
        
        try {
            HttpResponse<String> response = client.send(getRequest, 
                HttpResponse.BodyHandlers.ofString());
            
            System.out.println("Status: " + response.statusCode());
            System.out.println("Body: " + response.body());
            
        } catch (IOException | InterruptedException e) {
            System.err.println("HTTP error: " + e.getMessage());
        }
        
        // Async request
        CompletableFuture<HttpResponse<String>> asyncResponse = client.sendAsync(
            getRequest, HttpResponse.BodyHandlers.ofString());
        
        asyncResponse.thenAccept(response -> {
            System.out.println("Async response: " + response.statusCode());
        }).join();
    }
}
```

---

## 32. Logowanie â€” zapisuj zanim zniknie

*Logowanie to jak czarna skrzynka samolotu - gdy coÅ› pÃ³jdzie nie tak, to jedyne co Ci zostanie!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy logowania z SLF4J

```java
public class LoggingBasics {
    private static final Logger logger = LoggerFactory.getLogger(LoggingBasics.class);
    
    public void demonstrateLogging() {
        logger.trace("Bardzo szczegÃ³Å‚owe informacje");
        logger.debug("Informacje debugowania");
        logger.info("OgÃ³lne informacje o dziaÅ‚aniu aplikacji");
        logger.warn("OstrzeÅ¼enie - coÅ› moÅ¼e byÄ‡ nie tak");
        logger.error("BÅ‚Ä…d - coÅ› poszÅ‚o nie tak");
        
        // Logowanie z parametrami
        String user = "Anna";
        int attempts = 3;
        logger.info("User {} logged in after {} attempts", user, attempts);
        
        // Logowanie wyjÄ…tkÃ³w
        try {
            int result = 10 / 0;
        } catch (Exception e) {
            logger.error("BÅ‚Ä…d podczas obliczeÅ„", e);
        }
    }
}
```

---

### ðŸš€ CzÄ™Å›Ä‡ dla Seniorek

#### Structured logging z MDC

```java
public class StructuredLogging {
    private static final Logger logger = LoggerFactory.getLogger(StructuredLogging.class);
    
    public void processUserRequest(String userId, String requestId) {
        // Dodanie kontekstu do MDC
        MDC.put("userId", userId);
        MDC.put("requestId", requestId);
        
        try {
            logger.info("Processing user request");
            
            // Symulacja przetwarzania
            processBusinessLogic();
            
            logger.info("Request processed successfully");
            
        } catch (Exception e) {
            logger.error("Request processing failed", e);
        } finally {
            // Zawsze wyczyÅ›Ä‡ MDC
            MDC.clear();
        }
    }
    
    private void processBusinessLogic() {
        logger.debug("Executing business logic");
        // Kontekst z MDC automatycznie dodany do logÃ³w
    }
}
```

---

## 33. JavaDoc â€” kod mÃ³wi, ale dokumentacja krzyczy

*JavaDoc to jak instrukcja obsÅ‚ugi - nikt jej nie czyta, dopÃ³ki czegoÅ› nie zepsuje!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy JavaDoc

```java
/**
 * Klasa reprezentujÄ…ca kalkulator matematyczny.
 * UmoÅ¼liwia wykonywanie podstawowych operacji arytmetycznych.
 * 
 * @author Anna Kowalska
 * @version 1.0
 * @since 2024-01-01
 */
public class Calculator {
    
    /**
     * Dodaje dwie liczby.
     * 
     * @param a pierwsza liczba
     * @param b druga liczba
     * @return suma liczb a i b
     * @throws IllegalArgumentException gdy ktÃ³ryÅ› z parametrÃ³w jest null
     */
    public double add(Double a, Double b) {
        if (a == null || b == null) {
            throw new IllegalArgumentException("Parametry nie mogÄ… byÄ‡ null");
        }
        return a + b;
    }
    
    /**
     * Dzieli pierwszÄ… liczbÄ™ przez drugÄ….
     * 
     * @param dividend dzielna
     * @param divisor dzielnik
     * @return wynik dzielenia
     * @throws ArithmeticException gdy dzielnik wynosi 0
     * @see #add(Double, Double)
     */
    public double divide(double dividend, double divisor) {
        if (divisor == 0) {
            throw new ArithmeticException("Nie moÅ¼na dzieliÄ‡ przez zero");
        }
        return dividend / divisor;
    }
}
```

---

## 34. ModuÅ‚y w Javie (JPMS)

*ModuÅ‚y to jak pokoje w domu - kaÅ¼dy ma swoje przeznaczenie i kontrolujesz, kto moÅ¼e wejÅ›Ä‡!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy moduÅ‚Ã³w

```java
// module-info.java
module com.example.calculator {
    exports com.example.calculator.api;
    requires java.base;
    requires java.logging;
    
    provides com.example.calculator.api.CalculatorService 
        with com.example.calculator.impl.BasicCalculator;
}
```

---

## 35. Security basics

*Security to jak zamki w domu - lepiej mieÄ‡ za duÅ¼o niÅ¼ za maÅ‚o!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy bezpieczeÅ„stwa

```java
public class SecurityBasics {
    // Hashowanie haseÅ‚
    public static String hashPassword(String password) {
        try {
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            byte[] hash = md.digest(password.getBytes(StandardCharsets.UTF_8));
            return Base64.getEncoder().encodeToString(hash);
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException("SHA-256 not available", e);
        }
    }
    
    // Walidacja input
    public static boolean isValidEmail(String email) {
        return email != null && 
               email.matches("^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$");
    }
}
```

---

## 36. DDD-friendly Java: czyli jak pisaÄ‡ kod, ktÃ³ry ma sens biznesowy

*DDD to jak tÅ‚umaczenie miÄ™dzy Å›wiatem biznesu a Å›wiatem kodu - kaÅ¼dy musi rozumieÄ‡ o czym mÃ³wimy!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Value Objects i Entities

```java
public class DDDBasics {
    // Value Object - immutable, equality based on value
    public static class Money {
        private final BigDecimal amount;
        private final String currency;
        
        public Money(BigDecimal amount, String currency) {
            this.amount = Objects.requireNonNull(amount);
            this.currency = Objects.requireNonNull(currency);
        }
        
        public Money add(Money other) {
            if (!currency.equals(other.currency)) {
                throw new IllegalArgumentException("Cannot add different currencies");
            }
            return new Money(amount.add(other.amount), currency);
        }
        
        @Override
        public boolean equals(Object obj) {
            if (this == obj) return true;
            if (!(obj instanceof Money)) return false;
            Money money = (Money) obj;
            return Objects.equals(amount, money.amount) && 
                   Objects.equals(currency, money.currency);
        }
        
        @Override
        public int hashCode() {
            return Objects.hash(amount, currency);
        }
    }
    
    // Entity - identity based
    public static class Customer {
        private final CustomerId id;
        private String name;
        private String email;
        
        public Customer(CustomerId id, String name, String email) {
            this.id = Objects.requireNonNull(id);
            this.name = Objects.requireNonNull(name);
            this.email = Objects.requireNonNull(email);
        }
        
        @Override
        public boolean equals(Object obj) {
            if (this == obj) return true;
            if (!(obj instanceof Customer)) return false;
            Customer customer = (Customer) obj;
            return Objects.equals(id, customer.id);
        }
        
        @Override
        public int hashCode() {
            return Objects.hash(id);
        }
    }
    
    public static class CustomerId {
        private final String value;
        
        public CustomerId(String value) {
            this.value = Objects.requireNonNull(value);
        }
        
        public String getValue() { return value; }
        
        @Override
        public boolean equals(Object obj) {
            if (this == obj) return true;
            if (!(obj instanceof CustomerId)) return false;
            CustomerId that = (CustomerId) obj;
            return Objects.equals(value, that.value);
        }
        
        @Override
        public int hashCode() {
            return Objects.hash(value);
        }
    }
}
```

---

## 37. Reactive Programming i Project Reactor / RxJava

*Reactive Programming to jak reagowanie na wydarzenia w czasie rzeczywistym - zamiast pytaÄ‡ "czy coÅ› siÄ™ staÅ‚o?", sÅ‚uchasz i reagujesz!*

---

### ðŸŒ± CzÄ™Å›Ä‡ dla Juniorek

#### Podstawy Reactive Streams

```java
public class ReactiveBasics {
    public static void demonstrateFlowAPI() {
        // Java 9+ Flow API
        SubmissionPublisher<String> publisher = new SubmissionPublisher<>();
        
        // Subscriber
        Flow.Subscriber<String> subscriber = new Flow.Subscriber<String>() {
            private Flow.Subscription subscription;
            
            @Override
            public void onSubscribe(Flow.Subscription subscription) {
                this.subscription = subscription;
                subscription.request(1); // Request first item
            }
            
            @Override
            public void onNext(String item) {
                System.out.println("Received: " + item);
                subscription.request(1); // Request next item
            }
            
            @Override
            public void onError(Throwable throwable) {
                System.err.println("Error: " + throwable.getMessage());
            }
            
            @Override
            public void onComplete() {
                System.out.println("Stream completed");
            }
        };
        
        publisher.subscribe(subscriber);
        
        // Publish items
        publisher.submit("Hello");
        publisher.submit("Reactive");
        publisher.submit("World");
        publisher.close();
    }
}
```

---

### ðŸš€ CzÄ™Å›Ä‡ dla Seniorek

#### Project Reactor

```java
public class ReactorDemo {
    public static void demonstrateReactor() {
        // Mono - 0 or 1 element
        Mono<String> mono = Mono.just("Hello")
            .map(String::toUpperCase)
            .doOnNext(System.out::println);
        
        mono.subscribe();
        
        // Flux - 0 to N elements
        Flux<Integer> flux = Flux.range(1, 10)
            .filter(i -> i % 2 == 0)
            .map(i -> i * i)
            .doOnNext(i -> System.out.println("Square: " + i));
        
        flux.subscribe();
        
        // Async processing
        Flux<String> asyncFlux = Flux.interval(Duration.ofSeconds(1))
            .map(i -> "Tick " + i)
            .take(5);
        
        asyncFlux.subscribe(System.out::println);
        
        // Error handling
        Mono<String> errorMono = Mono.error(new RuntimeException("Oops"))
            .onErrorReturn("Fallback value");
        
        errorMono.subscribe(System.out::println);
    }
}
```

---

*ðŸ’¡ PamiÄ™taj: KaÅ¼de z tych narzÄ™dzi ma swoje miejsce. Nie uÅ¼ywaj mÅ‚otka do wszystkiego - czasem potrzebujesz Å›rubokrÄ™ta!*

